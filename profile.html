<!DOCTYPE html>
<html>
<head>
  <title>TravelLife App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#6c63ff">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>

<script>
if (!localStorage.getItem("loggedIn")) {
  window.location.href = "login.html";
}
</script>

<div class="app">

  <!-- TOP BAR -->
  <div class="topbar">
    <label class="avatar">
      <img id="profilePic" src="https://via.placeholder.com/50">
      <input type="file" id="picInput" accept="image/*" hidden>
    </label>
    <span id="username" class="username">User</span>
  </div>

  <!-- MAIN CONTENT -->
  <div class="main">

    <!-- CUSTOMIZE -->
    <div id="customize" class="panel active">
      <h2>ðŸŽ¨ Customize App</h2>

      <label>Background Color</label>
      <input type="color" id="bg">

      <label>Primary Color</label>
      <input type="color" id="primary">

      <label>Font</label>
      <select id="font">
        <option>Arial</option>
        <option>Verdana</option>
        <option>Georgia</option>
        <option>Courier New</option>
      </select>

      <button class="btn" onclick="saveTheme()">Save</button>
    </div>

    <!-- ALBUMS -->
    <div id="albums" class="panel">
      <h2>ðŸ“¸ Albums</h2>
      <p>Your uploaded memories appear here.</p>
    </div>

    <!-- CHECKLIST -->
    <div id="checklist" class="panel">
      <h2>ðŸ“‹ Checklist</h2>
      <label><input type="checkbox"> Passport</label><br>
      <label><input type="checkbox"> Clothes</label><br>
      <label><input type="checkbox"> Camera</label>
    </div>

    <!-- BUDGET -->
    <div id="budget" class="panel">
      <h2>ðŸ’° Budget Tracker</h2>
      <p>Track your expenses here.</p>
    </div>

  </div>

  <!-- BOTTOM NAV -->
  <div class="bottom-nav">
    <button onclick="openPanel('customize')">ðŸŽ¨</button>
    <button onclick="openPanel('albums')">ðŸ“¸</button>
    <button onclick="openPanel('checklist')">ðŸ“‹</button>
    <button onclick="openPanel('budget')">ðŸ’°</button>
  </div>

</div>

<script>
// ---------- PANEL SWITCH ----------
function openPanel(id) {
  document.querySelectorAll(".panel").forEach(p => p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

// ---------- PROFILE PICTURE ----------
const picInput = document.getElementById("picInput");
const profilePic = document.getElementById("profilePic");

picInput.onchange = () => {
  const reader = new FileReader();
  reader.onload = () => {
    profilePic.src = reader.result;
    localStorage.setItem("profilePic", reader.result);
  };
  reader.readAsDataURL(picInput.files[0]);
};

const savedPic = localStorage.getItem("profilePic");
if (savedPic) profilePic.src = savedPic;

// ---------- USERNAME ----------
const userData = JSON.parse(localStorage.getItem("user"));
document.getElementById("username").textContent =
  userData?.name || "User";

// ---------- THEME ----------
function saveTheme() {
  const theme = {
    bg: bg.value,
    primary: primary.value,
    font: font.value
  };
  localStorage.setItem("theme", JSON.stringify(theme));
  applyTheme();
}

function applyTheme() {
  const t = JSON.parse(localStorage.getItem("theme"));
  if (!t) return;
  document.documentElement.style.setProperty("--bg", t.bg);
  document.documentElement.style.setProperty("--primary", t.primary);
  document.documentElement.style.setProperty("--font", t.font);
}

applyTheme();
</script>

</body>
</html>

